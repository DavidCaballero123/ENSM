<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camino a la Identidad: El Juego de la Adolescencia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .progress-bar-bg {
            background-color: #4a5568; /* gray-700 */
        }
        .progress-bar-fg {
            transition: width 0.5s ease-in-out, background-color 0.5s ease-in-out;
        }
        .choice-btn {
            transition: all 0.2s ease-in-out;
        }
        .choice-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .stat-change {
            position: absolute;
            right: 0;
            top: -20px;
            font-weight: bold;
            animation: floatUp 1.5s ease-out forwards;
        }
        .stat-change.positive { color: #4ade80; } /* green-400 */
        .stat-change.negative { color: #f87171; } /* red-400 */
        
        @keyframes floatUp {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-25px); }
        }
        .avatar-btn {
            transition: all 0.2s;
        }
        .avatar-btn:hover {
            transform: scale(1.1);
            background-color: #38bdf8; /* cyan-400 */
        }
    </style>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen p-4">

    <div id="container" class="w-full max-w-2xl mx-auto">

        <!-- Pantalla de Inicio -->
        <div id="start-screen" class="text-center p-8 bg-gray-800 rounded-xl shadow-2xl">
            <h1 class="text-4xl font-bold text-cyan-400 mb-4">Camino a la Identidad</h1>
            <p class="text-lg text-gray-300 mb-6">Un viaje a trav√©s de la adolescencia para convertirte en un futuro docente de la Escuela Normal Superior de Michoac√°n.</p>
            <p class="text-sm text-gray-400 mb-8">Tus elecciones impactar√°n tu salud, identidad, vida social y tu preparaci√≥n acad√©mica para ingresar y destacar en la ENSM. ¬øEst√°s listo para empezar el camino del magisterio?</p>
            <button id="start-btn" class="w-full bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-6 rounded-lg text-xl choice-btn">Comenzar el Viaje</button>
        </div>

        <!-- Pantalla de Selecci√≥n de Avatar -->
        <div id="avatar-screen" class="hidden text-center p-8 bg-gray-800 rounded-xl shadow-2xl fade-in">
            <h2 class="text-3xl font-bold text-yellow-400 mb-6">Elige tu Avatar</h2>
            <div class="grid grid-cols-3 md:grid-cols-6 gap-4">
                <button class="avatar-btn text-6xl p-4 bg-gray-700 rounded-full" onclick="selectAvatar('üßë')">üßë</button>
                <button class="avatar-btn text-6xl p-4 bg-gray-700 rounded-full" onclick="selectAvatar('üë©')">üë©</button>
                <button class="avatar-btn text-6xl p-4 bg-gray-700 rounded-full" onclick="selectAvatar('üë®‚Äçü¶±')">üë®‚Äçü¶±</button>
                <button class="avatar-btn text-6xl p-4 bg-gray-700 rounded-full" onclick="selectAvatar('üë©‚Äçü¶∞')">üë©‚Äçü¶∞</button>
                <button class="avatar-btn text-6xl p-4 bg-gray-700 rounded-full" onclick="selectAvatar('üßë‚Äçüé§')">üßë‚Äçüé§</button>
                <button class="avatar-btn text-6xl p-4 bg-gray-700 rounded-full" onclick="selectAvatar('üßë‚Äçüíª')">üßë‚Äçüíª</button>
            </div>
        </div>
        
        <!-- Pantalla de Juego -->
        <div id="game-screen" class="hidden">
            <div class="bg-gray-800 rounded-xl shadow-2xl p-6 md:p-8 relative">
                <div id="avatar-display" class="absolute top-4 right-4 text-4xl bg-gray-700 rounded-full w-16 h-16 flex items-center justify-center"></div>
                <div class="mb-6">
                    <h2 id="stage-title" class="text-2xl font-bold text-center text-yellow-400 mb-2"></h2>
                    <p class="text-center text-cyan-400 text-sm mb-4">Escuela Normal Superior de Michoac√°n</p>
                </div>

                <!-- Estad√≠sticas -->
                <div id="stats-container" class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                    <!-- Las estad√≠sticas se generar√°n aqu√≠ con JS -->
                </div>

                <!-- Tarjeta de Evento -->
                <div id="event-card" class="bg-gray-700 p-6 rounded-lg mb-6 min-h-[150px]">
                    <p id="event-text" class="text-lg text-gray-200"></p>
                </div>

                <!-- Opciones -->
                <div id="choices-container" class="grid grid-cols-1 gap-4 mb-6">
                    <!-- Los botones de opci√≥n se generar√°n aqu√≠ con JS -->
                </div>

                <!-- Retroalimentaci√≥n -->
                <div id="feedback-container" class="min-h-[100px]">
                    <div id="feedback-card" class="hidden bg-gray-900 p-4 rounded-lg">
                        <p id="feedback-text" class="text-center text-gray-300"></p>
                    </div>
                </div>

                <button id="next-btn" class="hidden w-full bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-6 rounded-lg text-lg choice-btn mt-4">Siguiente</button>
            </div>
        </div>

        <!-- Pantalla Final -->
        <div id="end-screen" class="hidden text-center p-8 bg-gray-800 rounded-xl shadow-2xl fade-in">
            <h1 class="text-4xl font-bold text-cyan-400 mb-4">Fin del Viaje</h1>
            <p id="end-title" class="text-2xl text-yellow-400 font-semibold mb-4"></p>
            <p id="end-text" class="text-lg text-gray-300 mb-8"></p>
            <div id="final-stats" class="mb-8"></div>
            <button id="restart-btn" class="w-full bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-6 rounded-lg text-xl choice-btn">Jugar de Nuevo</button>
        </div>
    </div>

    <script>
        // --- ELEMENTOS DEL DOM ---
        const startScreen = document.getElementById('start-screen');
        const avatarScreen = document.getElementById('avatar-screen');
        const gameScreen = document.getElementById('game-screen');
        const endScreen = document.getElementById('end-screen');
        
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const nextBtn = document.getElementById('next-btn');

        const stageTitle = document.getElementById('stage-title');
        const statsContainer = document.getElementById('stats-container');
        const eventText = document.getElementById('event-text');
        const choicesContainer = document.getElementById('choices-container');
        const feedbackCard = document.getElementById('feedback-card');
        const feedbackText = document.getElementById('feedback-text');
        const avatarDisplay = document.getElementById('avatar-display');

        // --- DATOS DEL JUEGO ---
        const STAT_NAMES = {
            health: { label: 'Salud', icon: '‚ù§Ô∏è' },
            identity: { label: 'Identidad', icon: 'üë§' },
            social: { label: 'Social', icon: 'üë•' },
            academic: { label: 'Acad√©mico', icon: 'üìö' }
        };
        
        // Eventos principales basados en el documento
        const storyEvents = [
            // --- Adolescencia Temprana (10-14 a√±os) ---
            { stage: 'Adolescencia Temprana', text: 'Notas que tu cuerpo est√° cambiando r√°pidamente (el "estir√≥n") y te sientes un poco torpe e inseguro. Un amigo te dice: "¬øEst√°s bien? Te ves diferente".', choices: [{ text: 'Confiarle que te sientes raro con tu cuerpo.', effects: { identity: 10, social: 10, health: 5 }, feedback: 'Buena elecci√≥n. Compartir tus inseguridades fortalece tus lazos sociales y tu autoconocimiento.' },{ text: 'Hacer una broma para ocultar tu incomodidad.', effects: { identity: -5, social: 5 }, feedback: 'El humor puede ser una defensa, pero afrontar tus sentimientos es clave para construir tu identidad.' },{ text: 'Enojarte y decirle que no es su asunto.', effects: { identity: -10, social: -15 }, feedback: 'El humor cambiante es com√∫n, pero puede afectar tus relaciones. La comunicaci√≥n es importante.' }] },
            { stage: 'Adolescencia Temprana', text: 'Tus padres quieren saber todo lo que haces y con qui√©n hablas. Sientes una fuerte necesidad de tener tu propio espacio y privacidad.', choices: [{ text: 'Hablar con ellos calmadamente sobre tu necesidad de privacidad.', effects: { identity: 10, social: 5 }, feedback: 'Establecer l√≠mites de forma respetuosa es un paso importante hacia la autonom√≠a.' },{ text: 'Ocultarles cosas y volverte m√°s reservado.', effects: { identity: 5, social: -10 }, feedback: 'Si bien buscas autonom√≠a, esto puede generar desconfianza y da√±ar la relaci√≥n familiar.' },{ text: 'Desafiar su autoridad constantemente y discutir por todo.', effects: { social: -15, academic: -5 }, feedback: 'El conflicto con los padres es parte del proceso, pero el desaf√≠o constante genera estr√©s.' }] },
            { stage: 'Adolescencia Temprana', text: 'Tu grupo de amigos empieza a interesarse en cosas que a ti no te llaman la atenci√≥n. Te sientes presionado a seguirlos para no quedarte solo.', choices: [{ text: 'Proponer una actividad que a ti te guste.', effects: { identity: 10, social: 5 }, feedback: 'Defender tus propios intereses es fundamental para definir qui√©n eres, m√°s all√° del grupo.' },{ text: 'Participar sin ganas para no ser excluido.', effects: { identity: -10, social: 10 }, feedback: 'Priorizar al grupo sobre ti mismo es com√∫n, pero puede llevar a la confusi√≥n de tu propia identidad.' },{ text: 'Alejarte del grupo y buscar amigos nuevos.', effects: { social: -10 }, feedback: 'El grupo de pares es un gran soporte en esta etapa; a veces solo se necesita comunicaci√≥n.' }] },
            // --- Adolescencia Media (14-17 a√±os) ---
            { stage: 'Adolescencia Media', text: 'Est√°s en una fiesta y un amigo popular te ofrece un cigarrillo. Todos te est√°n mirando. Sientes la presi√≥n del grupo.', choices: [{ text: 'Aceptar para no desentonar.', effects: { health: -15, social: 10 }, feedback: 'Ceder a la presi√≥n de grupo es un riesgo com√∫n, motivado por el sentimiento de que todos te observan (audiencia imaginaria).' },{ text: 'Rechazarlo amablemente pero con firmeza.', effects: { health: 10, identity: 15, social: -5 }, feedback: 'Tomar decisiones saludables, aunque sean impopulares, fortalece tu identidad y autocontrol.' },{ text: 'Tomarlo y fingir que fumas.', effects: { health: -5, social: 5, identity: -10 }, feedback: 'Intentar encajar a costa de tus valores genera confusi√≥n interna sobre qui√©n eres realmente.' }] },
            { stage: 'Adolescencia Media', text: 'Te sientes invencible, como si nada malo pudiera pasarte. Un amigo te reta a hacer algo arriesgado, como conducir una moto sin casco.', choices: [{ text: 'Aceptar el reto. ¬°La vida es una sola!', effects: { health: -30, social: 10 }, feedback: 'Este sentimiento de omnipotencia es t√≠pico de la adolescencia media y puede llevar a conductas de riesgo peligrosas.' },{ text: 'Reconocer el peligro y negarte.', effects: { health: 15, identity: 10 }, feedback: 'Aunque tu cerebro te impulse a la acci√≥n, tu capacidad de pensamiento abstracto te permite evaluar consecuencias. ¬°Bien hecho!' },{ text: 'Proponer una actividad emocionante pero segura.', effects: { health: 5, social: 15, identity: 5 }, feedback: 'Canalizar la b√∫squeda de emociones hacia actividades seguras es una estrategia de desarrollo muy madura.' }] },
            { stage: 'Adolescencia Media', text: 'Pasas horas en redes sociales, comparando tu vida con las de los dem√°s. Empiezas a sentir que tu vida es aburrida y t√∫ no eres suficiente.', choices: [{ text: 'Limitar tu tiempo en redes y enfocarte en tus hobbies y estudios.', effects: { health: 10, identity: 10, social: -5, academic: 5 }, feedback: 'Reconocer el impacto negativo del mundo digital es clave. La identidad se construye en la realidad, no en perfiles online.' },{ text: 'Crear un perfil "perfecto" para competir.', effects: { identity: -15, social: 5 }, feedback: 'Crear identidades falsas te aleja de tu verdadero yo y puede causar ansiedad y problemas de autoestima.' },{ text: 'Hablar con un amigo o familiar sobre c√≥mo te sientes.', effects: { health: 15, identity: 5, social: 10 }, feedback: 'El apoyo de tu red social real es un factor protector fundamental contra los riesgos del mundo digital.' }] },
            // --- Adolescencia Tard√≠a (18-21 a√±os) - TEM√ÅTICA ENSM ---
            { stage: 'Adolescencia Tard√≠a', text: 'Es momento de prepararte para el examen de admisi√≥n de la Normal Superior. Sientes la presi√≥n de una decisi√≥n que definir√° tu futuro como docente.', choices: [{ text: 'Investigar el plan de estudios de la ENSM y crear un calendario de estudio riguroso.', effects: { academic: 20, identity: 15 }, feedback: 'Tu pensamiento orientado al futuro y tu disciplina demuestran tu vocaci√≥n. ¬°Excelente preparaci√≥n!' },{ text: 'Estudiar solo lo que tus maestros te dicen, sin explorar m√°s.', effects: { academic: 5, identity: -10 }, feedback: 'Cumplir es bueno, pero la vocaci√≥n docente requiere iniciativa y pasi√≥n por aprender m√°s.' },{ text: 'Confiar en tu suerte y no prepararte demasiado.', effects: { academic: -20, identity: -15 }, feedback: 'La suerte no es una estrategia. El ingreso a la Normal Superior requiere esfuerzo y compromiso.' }] },
            { stage: 'Adolescencia Tard√≠a', text: 'Tu relaci√≥n de pareja se ha vuelto muy importante, pero tu preparaci√≥n para la ENSM consume mucho tiempo.', choices: [{ text: 'Formar un grupo de estudio con tu pareja para apoyarse mutuamente.', effects: { social: 10, academic: 15, identity: 5 }, feedback: 'Combinar tus metas con tus relaciones afectivas es un signo de gran madurez.' },{ text: 'Priorizar a tu pareja, dejando el estudio en segundo plano.', effects: { social: 15, academic: -20 }, feedback: 'Descuidar tus metas a largo plazo por una gratificaci√≥n inmediata puede traer arrepentimientos.' },{ text: 'Terminar la relaci√≥n para enfocarte 100% en el examen.', effects: { identity: 5, social: -15, academic: 10 }, feedback: 'A veces hay que hacer sacrificios, pero el aislamiento total puede afectar tu bienestar emocional.' }] },
            { stage: 'Adolescencia Tard√≠a', text: 'Miras hacia atr√°s y te das cuenta de que tus padres, algunos de ellos docentes, ten√≠an raz√≥n en muchas cosas sobre la disciplina y el esfuerzo.', choices: [{ text: 'Compartirles tu sue√±o de entrar a la ENSM y pedirles consejo.', effects: { identity: 15, social: 15 }, feedback: 'Excelente. Has establecido una relaci√≥n adulta con ellos, valorando su experiencia para forjar tu propio camino.' },{ text: 'Ocultarles tus planes para que no se involucren.', effects: { identity: 5, social: -5 }, feedback: 'La independencia no significa rechazar el apoyo, sino saber integrarlo a tus propias decisiones.' },{ text: 'Dejar que ellos decidan si la docencia es para ti.', effects: { identity: -20, academic: -5 }, feedback: 'La vocaci√≥n debe ser tuya. Dejar que otros decidan por ti es un signo de confusi√≥n de identidad.' }] }
        ];

        const randomEvents = [
            { text: '¬°Evento Sorpresa! Tu banda favorita viene a la ciudad la noche antes de un examen de simulaci√≥n para la Normal.', choices: [{text: 'Ir al concierto. ¬°Una noche para despejarme!', effects: {social: 20, academic: -20, health: -5}, feedback: 'La diversi√≥n es importante, pero a veces tiene un costo acad√©mico.'}, {text: 'Vender la entrada y enfocarte en la gu√≠a de estudio.', effects: {social: -10, academic: 15}, feedback: 'Tomar decisiones responsables es un signo de madurez, aunque duela un poco.'}]},
            { text: '¬°Evento Sorpresa! Te contagias de un resfriado fuerte y tienes que quedarte en cama por dos d√≠as.', choices: [{text: 'Aprovechar para descansar y recuperarte.', effects: {health: 15, academic: -10, social: -5}, feedback: 'Escuchar a tu cuerpo es fundamental para la salud a largo plazo.'}, {text: 'Intentar seguir estudiando a pesar del malestar.', effects: {health: -15, academic: -5}, feedback: 'Ignorar las se√±ales de tu cuerpo puede empeorar las cosas y afectar tu rendimiento.'}]},
            { text: '¬°Evento Sorpresa! Encuentras una cartera en la calle con dinero y una identificaci√≥n.', choices: [{text: 'Buscar al due√±o y devolverla.', effects: {identity: 15}, feedback: 'Actuar con base en tus valores √©ticos fortalece enormemente tu identidad como futuro docente.'}, {text: 'Quedarte el dinero y tirar la cartera.', effects: {identity: -20, social: 5}, feedback: 'Las ganancias f√°ciles a costa de tus principios erosionan tu auto-concepto.'}]}
        ];
        
        // --- ESTADO DEL JUEGO ---
        let gameState = {};

        function initGameState(avatar) {
            gameState = {
                stats: { health: 60, identity: 50, social: 60, academic: 50 },
                currentStageIndex: 0,
                eventsInStage: 0,
                currentEvent: null,
                avatar: avatar,
                hadRandomEvent: false
            };
        }

        const stages = ['Adolescencia Temprana', 'Adolescencia Media', 'Adolescencia Tard√≠a'];

        // --- L√ìGICA DE LA INTERFAZ ---
        function updateStatsUI(oldStats = {}) {
            statsContainer.innerHTML = '';
            for (const key in gameState.stats) {
                const statInfo = STAT_NAMES[key];
                const value = Math.max(0, Math.min(100, gameState.stats[key]));
                
                let colorClass = 'bg-green-500';
                if (value < 50) colorClass = 'bg-yellow-500';
                if (value < 25) colorClass = 'bg-red-500';

                const statElement = document.createElement('div');
                statElement.className = "relative";
                statElement.innerHTML = `
                    <div class="text-sm font-semibold text-gray-300 mb-1">${statInfo.icon} ${statInfo.label}</div>
                    <div class="progress-bar-bg w-full h-4 rounded-full">
                        <div class="progress-bar-fg h-4 rounded-full ${colorClass}" style="width: ${value}%;"></div>
                    </div>
                `;
                statsContainer.appendChild(statElement);

                // Mostrar cambio visual
                const oldValue = oldStats[key];
                if (oldValue !== undefined && oldValue !== value) {
                    const diff = value - oldValue;
                    const changeIndicator = document.createElement('span');
                    changeIndicator.textContent = `${diff > 0 ? '+' : ''}${diff}`;
                    changeIndicator.className = `stat-change ${diff > 0 ? 'positive' : 'negative'}`;
                    statElement.appendChild(changeIndicator);
                }
            }
        }

        function showFeedback(text) {
            feedbackText.textContent = text;
            feedbackCard.classList.remove('hidden');
            feedbackCard.classList.add('fade-in');
            choicesContainer.childNodes.forEach(button => button.disabled = true);
            nextBtn.classList.remove('hidden');
        }

        function displayEvent(isRandom = false) {
            feedbackCard.classList.add('hidden');
            nextBtn.classList.add('hidden');

            if (isRandom) {
                gameState.currentEvent = randomEvents[Math.floor(Math.random() * randomEvents.length)];
                gameState.hadRandomEvent = true;
            } else {
                const stageEvents = storyEvents.filter(e => e.stage === stages[gameState.currentStageIndex]);
                if (gameState.eventsInStage >= stageEvents.length) {
                    moveToNextStage();
                    return;
                }
                gameState.currentEvent = stageEvents[gameState.eventsInStage];
                gameState.hadRandomEvent = false;
            }
            
            stageTitle.textContent = gameState.currentEvent.stage || stages[gameState.currentStageIndex];
            eventText.textContent = gameState.currentEvent.text;
            choicesContainer.innerHTML = '';

            gameState.currentEvent.choices.forEach((choice) => {
                const button = document.createElement('button');
                button.textContent = choice.text;
                button.className = 'w-full bg-gray-600 hover:bg-cyan-700 text-white font-semibold py-3 px-4 rounded-lg choice-btn';
                button.onclick = () => {
                    const oldStats = { ...gameState.stats };
                    for (const stat in choice.effects) {
                        gameState.stats[stat] += choice.effects[stat];
                    }
                    updateStatsUI(oldStats);
                    showFeedback(choice.feedback);
                };
                choicesContainer.appendChild(button);
            });
        }
        
        function moveToNextStage() {
            gameState.currentStageIndex++;
            gameState.eventsInStage = 0;
            if (gameState.currentStageIndex >= stages.length) {
                endGame();
            } else {
                displayEvent();
            }
        }

        function nextTurn() {
            if (gameState.hadRandomEvent) {
                displayEvent(false);
            } else {
                gameState.eventsInStage++;
                const stageEvents = storyEvents.filter(e => e.stage === stages[gameState.currentStageIndex]);
                const isLastEventOfStage = gameState.eventsInStage >= stageEvents.length;

                if (!isLastEventOfStage && Math.random() < 0.33) { // 33% de probabilidad de evento aleatorio
                    displayEvent(true);
                } else {
                    displayEvent(false);
                }
            }
        }

        // --- FLUJO DEL JUEGO ---
        function selectAvatar(avatar) {
            initGameState(avatar);
            avatarDisplay.textContent = gameState.avatar;
            avatarScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            gameScreen.classList.add('fade-in');
            updateStatsUI();
            displayEvent();
        }

        function showAvatarScreen() {
            startScreen.classList.add('hidden');
            endScreen.classList.add('hidden');
            avatarScreen.classList.remove('hidden');
        }

        function endGame() {
            gameScreen.classList.add('hidden');
            endScreen.classList.remove('hidden');
            const { health, identity, social, academic } = gameState.stats;
            const avgStat = (academic + identity);

            let title, text;

            if (academic >= 80 && identity >= 70) {
                title = "¬°Felicidades, Normalista!";
                text = "Has navegado la adolescencia con vocaci√≥n y disciplina. Tu fuerte sentido de la identidad y tu preparaci√≥n te han abierto las puertas de la Escuela Normal Superior de Michoac√°n. Est√°s en el camino para ser un gran docente.";
            } else if (academic >= 60 && identity >= 50) {
                title = "Un Comienzo Prometedor";
                text = "Lograste tu objetivo de entrar a la Normal, pero el camino no fue f√°cil. Tienes la vocaci√≥n, pero deber√°s esforzarte para equilibrar tu vida personal y acad√©mica. ¬°El potencial est√° ah√≠!";
            } else {
                title = "Un Camino por Redefinir";
                text = "La adolescencia fue un periodo de muchas distracciones. No lograste ingresar a la Normal Superior en este intento. Recuerda que la vocaci√≥n de ense√±ar puede encontrar muchos caminos y nunca es tarde para reintentarlo.";
            }

            document.getElementById('end-title').textContent = title;
            document.getElementById('end-text').textContent = text;
            
            const finalStatsContainer = document.getElementById('final-stats');
            finalStatsContainer.innerHTML = '<h3 class="text-xl font-bold mb-2 text-gray-300">Resultado Final</h3>';
            const finalStatsGrid = document.createElement('div');
            finalStatsGrid.className = 'grid grid-cols-2 gap-4 max-w-md mx-auto';
            for (const key in gameState.stats) {
                const statInfo = STAT_NAMES[key];
                const value = Math.max(0, Math.min(100, gameState.stats[key]));
                finalStatsGrid.innerHTML += `
                    <div class="bg-gray-700 p-3 rounded-lg">
                        <div class="font-semibold">${statInfo.icon} ${statInfo.label}</div>
                        <div class="text-2xl font-bold text-cyan-400">${value}</div>
                    </div>
                `;
            }
            finalStatsContainer.appendChild(finalStatsGrid);
        }

        // --- EVENT LISTENERS ---
        startBtn.addEventListener('click', showAvatarScreen);
        restartBtn.addEventListener('click', showAvatarScreen);
        nextBtn.addEventListener('click', nextTurn);

    </script>
</body>
</html>
